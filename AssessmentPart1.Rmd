---
title: "Assessment Part One"
author: "Sam Colchester"
date: "20/11/18"
output:
  html_notebook:
    fig_caption: yes
    fig_height: 4
    fig_width: 5
    number_sections: yes
    theme: readable
    toc: yes
    toc_depth: 2
  pdf_document:
    toc: yes
    toc_depth: '2'
  html_document:
    df_print: paged
    theme: readable
    toc: yes
    toc_depth: '2'
  word_document:
    toc: yes
    toc_depth: '2'
---

Figure 1 was built entirely using GUI based software ArcMap. This map used data from a variety of different sources. Used the Ordnance Surveyâ€™s Master Map for land use (principally the coniferous and broadleaf forestry). Land Cover vector data (2015), contains a huge amount of detail. The shapefiles (forests) had been divided into small areas, used the dissolve tool to combine them so that total forest size is correct. This also had the effect of merging all of the separate polygons into only one row in the attribute table. Resolved this by using the Edit > Advanced Editing > Explode tool. 

![Figure 1 - Map made with GUI (ArcMap)](Images/Powys-forestry.jpg)
```{r message=FALSE, warning=FALSE}

library(maptools) 
library(RColorBrewer) 
library(sp) 
library(rgeos) 
library(tmap) 
library(tmaptools) 
library(sf) 
library(rgdal)
#Reading the Shapefile for the entirety of England and Wales
EngWal.OA <- read_shape("OAEngWal/Output_Area_December_2011_Generalised_Clipped_Boundaries_in_England_and_Wales.shp", as.sf = T)
#Selecting just Powys OAs with tag "W06000023"
powys.OA <- EngWal.OA[grep("^W06000023", EngWal.OA$lad11cd),]
#Import census data
carownership <- read.csv("KS404EWDATA.CSV", header = T, sep = ",")
#Joining census data
powys.OA.datamap <- append_data(powys.OA, carownership, key.shp = "oa11cd", key.data = "GeographyCode", ignore.duplicates = T)
#Simplifying the the car/van ownership column reference
own <- "KS404EW0008"
#Plotting using the car/van ownership column
MAP <- tm_shape(powys.OA.datamap) +
  tm_polygons(own, 
              breaks = c(0, 2, 4, 6, 8, 10, Inf), 
              palette = "Oranges", 
              title = "Car ownership",
              legend.format = list(fun = function(x) paste0(formatC(x, digits=0, format="f"), "%"))) +
  tm_scale_bar(position = c("left", "bottom")) +
  tm_layout(
    title = "Car Ownership in Powys, Wales", 
    legend.position = c("right", "bottom"),
    title.size = 1, 
    legend.title.size = 0.8,
    legend.text.size = 0.6,
    bg.color = "grey85",
    inner.margins = 0.1)
```

Figure 2 was created entirely within the confines of RStudio. 

![Figure 2 - Map made with command line (R)](Images/CarownershipPowys.png)
